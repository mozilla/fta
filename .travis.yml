os: linux
dist: xenial
language: python
python:
- '3.8'
services:
- postgresql
before_install:
- openssl aes-256-cbc -K $encrypted_6add1b01ff9b_key -iv $encrypted_6add1b01ff9b_iv
  -in gae-keyfile.json.enc -out gae-keyfile.json -d
- sudo apt-get update -qq
install:
- pip install -r requirements/local.txt
script:
- pre-commit run --all
- pytest -v
before_deploy:
- python deploy/pre_deploy_script.py
deploy:
  provider: gae
  keyfile: "./gae-keyfile.json"
  project: "$PROJECT_ID"
  skip_cleanup: true
  on:
    branch: main
after_deploy:
- python manage.py collectstatic
- gsutil rsync -r staticfiles gs://$DJANGO_GCP_STORAGE_BUCKET_NAME/static
env:
  global:
  - secure: eFxDTS77D+RuXsYn2ourBBvG9Yt9uzr5jvoJyKt7BXo25RLj8gOoG7rhvOR/YdEE6WlTk7xaENNeVSpaq5HIzt90UZvcN7CL6U2DpaWOsZw0f/Z0YPv19bWSaMVtfb7r9HQzKauq54Z/WE4XADGX4vOhbDmUTTerq3YYuJdp1gk1KxXLLWs5HHI1iJKoNS2NhIr5jpmX3jaZiy/1ee4n9wXIrpXWEvEQ40j9jWIr3YruSoG0Sm4IU7EOHELf9ElUEPw0GnPUFKQu2JzP78+L/4eZQ6SJeqzn5hQYXXE594qxgABRQsMDvEGdYjLLzZbZ3E20N6RjRRyhm5LHHcYhwciLEJmA99JF0dcMGkKLtlNWDG1fPVaVuVlusLljM1IVPxU0iwXyxg2DGQX8GqR4uqpAYr7HCbEX5GxtSYwzsvmBHVBDzalww4S1cyovXXYi5J1Xoc/IZshjE6hpULPgEFSydEsaFnxtyfOFG26AW38Xu+5gM44gXUW37ROpnoVrxHepwOQS5a0T3eWXTbZYaGF8U+Z0ElGs9T/Rn4jK6bzTAB2SBeWqvZDQ25M2JsIxPIE1SAcmY42j+jorvfTqS0sglkA6lcCp/SJWDqglnPmhvMk31B8aMfF+hD4UqnQV5cM0W48wSFa61VcvbR7uLqvefzOsV14iELqawIO1Om4=
  - secure: sdJapHvXozcmxolh4cev0EzvuAgtDMMKiRRz+ytwhAKKMr8zIxaMwq1JZ8PMKnQe0BiXkg+fvhf0APBCnTXQeb/ZZt0a8X6zJrwQWk1tUIOl81aJd29aMCQk6QYGK79n9KkQIE1148tCtzljxX1x488WYKIBRLHVxb5W5J7aW+C0n34Uf+SpM/f0Y27nA8426/V8cxgu82AjwgDzNYblL3EhLoUcQfDB72Brj2WTJW0ElQG4bWcGPNmoT9dNGesF4HNetq/2YksrBb7FcB7LmvgyTMuby3o7bK//hYk36Ua+zzOTikcAhq7C8V4sAVJl/TemI/PayQbEULLKXP4JQVebvx+GHcW7ZXgCXbuKS8lewRxVgfq/xAZohDaYE8wP62hGHwB4bdx537iAHUxSMJ5DzWb0fHWQ6n1os5yap5gyn6uUCaLZTwYvpnoLMDbr9lqXZHG0qZHobFybwiKszZcNwYPy+Ls6zYkeB/GDRG9+1cnBfW6DPq50fgNpf1L1ylUTcIuUDs7Nio9jMgJj0Gb49m42FKoipNsJNB22oNCcqXO96XFruRnU4mwatwqsdxdfKd8X3pFU3Ppyf9858OqlTJDl0TJaxv3VuQWpSXSMSIOyPcDp5nyykCR43IfeqZoxNWiRiLt32eLZ82rW7O+aM7/6zMpZxoc8oTAk1k0=
  - secure: QhMOvL+epmppHqdsDTahiPwpCSYl++owExMDm++Z7m1fe/sabkhE1WhQ3uPXZpa8CdThFLJ6g6KidbB8nzGdNdZ+aUrBQbenhMHwgqDthYPzkHZGb2qln0Ez9gzB2pWKrJX/sYX6hY/QwstbpELroz5Z05i5aM1RsMu+4rGjQYcAim/iY6927QkO6/j74schhomMC567L5QuBqjVe7wmW/XnXg6C7HlX8p36TvYyw8qCTr3IwYoLSnIBN8Pv7jiIiK2nVcBFh3yo/8J7GtMwA9HM0PcZ+aSrmWxK154R6M5W24PUWLikoL8r0LKzVmUoI9vPjEWDdv6RLkxBS7nrzlUiZ38z+TOEG4pW67y29cyjoWQW4J9XQsDuOPrUDyjv7ctnYW09Srm3vIdLixIAK+yDy3qK/Kz3j3Lumx2cvcCnwbk3ZztwCenViGT3pJYIWPOpcut5g8T2XsZQzB4GB4Vw8g8qYKfBrL4jQtiP0a29RT36MioG+XX9oShwoU/OP45gsQMovtWOv0C//HChDv2MyWVXNOQnq4SvOSrAkx3iPu4DQeZLf3U28qHGvI+ncAK1ncTl4BHP1H3zCPAVne/pgf+WuhAKVnnIO7lCU7LnL5uMaX7VNOnNiMsWtfuvQLczZ/3iYEqJhoH8CmG5PiqTr8nfBh2BF/1oEK/N2ro=
  - secure: JJkEn1s9QfsmHD9lQ4d57/d4EpVRVTTQ3Nbdudml8xWNxB0gBnylPdL6sl53Ev3T0fxlNPIRstPk9EHTVcgHgR0Ti9bpnwwXuqVwwmp9ijvlpobwkeB7d3jeDx+EDekWlxgLzbQsTPW153IxKr7aCqyJuaYVGNMWfb/A2EEHr9z1PF2yPSGOL8itpPXOGC3wUfRJlDt62wwDy6sQGz0QzIYBWg+oqwKVR0pspM46leGIJtwutXNpWU26GsmVNNqxMclTfZEjc9htYEyJuF60DWYJ68nsqzGhhC8daAv7JciTrg6mcpL8x6Z3CgGLuTpMdta8GDoxKO/+Dp/a9FcCOtrYZ+baZW5aOlO6IIje17kD46mWZ+FxacVNrnWI2VPIZdqG2h/7yhSjgnk6qGdPL+1udElOpf9NimJGCYfLs4N6uOaY+wZWIpo+ECrwGgUy6+INzfu9Ujnzoc/iSW0s3OBv/M9jp/76qhhGb743ZDYate3GM4zZPR9/s5fxj+Rlr3gFdIapvBuCTLwzbt6w1wVxc6FBnGuIeO5NJz7TYKXGwXR/b5CqbG/ZFjVP6bBM8rVE4/tTPY4FlXgI1NWXP0xKYfo9caLz/KGdxELejk3q5whIem3y8DzW2EeB9bc0IFtUEX0VoUT4GzsjoLaMoKk5ojkW8E53xUmgN9H/6h4=
  - secure: h2vZF/4NgbEfy/SePS0xPPp84Ny85yNF53qNjSE1tKEmNN/iIbrSRjDBflnxxl/L8QsSKhhhNdolRT6ofkl5vQFVGvUrnws5yLNRGAuHzuwCJPUCQ0TCr5hNNWvrlANn80lUdbEiRj6+twXE5kozkncZapXF98UZNY+PC2xTICtRRZ72UfuuAPdsmAfrpMK5XnKzXwnOzgFgHIK6Q3xV1GA1zP15ZWDlImTg9nObUC99PfiBYLBSC8yVTuHblbqDtFiFRi4WkD+h3/Wl2gJy64QVHTdUti0tE/nh5kKPN+bGrea3hmnvXTFp8ap47SyB3UggR0HfITgNvkop0lRth4SfRp1EWRpcra3CpExtbWMtQYWQULVFWd5Q5aLWFi4ASDqhMG7FWJRSBmzskG8JGs4/XczXdJqqNERiX2gfcgmpO7YqIZqjMTjIL6hQSoZ/2N8ftNhzICFvTJGn6yl9jjBQX323Yp3gQgvN9wsIn1CqxcgJvo7RtKNk7PizxqMkA66Gq4EBkcPFz2T9sYcVW/WqSXXoIHVAeQFiQqaCbaSLKBb63UKc7AAftaeL9mD6bA/W6ceZQTEXqO2Cfq13lSfYkm/u4Ln6F+3G6FlZl6uQvuEGwc8fpPaUiMGGMPwGuDTOj0nbHMKfo16JmpU12ntYfUKDhN7pQOkwQoHmC4Q=
  - secure: ocwuJsGadnjuVbL+ciTyxlHbplvBMp/NKMLWKcOXgq+e18osaqa+tRLs3Jr0lfGgxKA885sJXAbaQxgTrQy9djIPxOPWKSxjMhdBFNdtPMFnW2gYTFxSZ9BI3QjaiU9RKhDn9WbNt9qTg1KimCevIh/aiM2Y1rgN1c0Qxq5srmIojINtTbbeS9djXxeTWFFB8Ds67QOZgpgoFdGWMO8AkbHXPhUgAoO2Oh2xOpmFWiqZMW2JNnWzXk6vfmA74Y6FzVLRwLVDyJ7DBBNCHaKO37xkmqHoFgJWhI2chRHYXyqXyWQ1JlLml07yiaMoqZu0XL+QEJVueE9mckKWmDOxI75DOlWoC++LWfJtTgZALxUPkVACPzVMDbNgoub+KNdAivdcrUSGZAdq8xsqsONhVvcfWN5LPXFij08vDtnE9+U65FwBu0V0R3eH0S/Z931SC7+0cWZh7pK//nhfT4vvot1RQInBY0SW2E6G3Vw1vDLmsOBPZDlrk7nx266nX4kcPYoAwbPm3GoN260lKBdxxx9da/l7Sr8TqRdZ9Tfa9TnDmaAOXgjAQajCuizOkUPSqnAS1r3OV9wacqj77sABy061FrpavZFMEcNofQck8RB8bhvSkM6qD1zjJnFgAqk9Ybh/P56/euWIl7HqCtdBsqbncTwhL6UK1wGu61Mqbus=
  - secure: IZxj+CUi9Pcr34lvKAN1spo7NJ27yupyiw8fv0TuYuvt2oSVjmxMlxGOfhpkGbS4AWf2BNtwEou4+m3jYIbzl3mb33zxvWxK4SQTOpwhgdRN9AV9KkRXzGdlkgq2SExUeD4y4X5DBUbhfqMCVs2iB3SU3TbWs1EdBCGbYJVIBxk3xWzMTe3wNXBMi5NMQFYrg6Y3XPGKUuP9OGjxdlvExj1CXgvok49HR+x6jr08N7V6zkxCM34npwqZlz038d0xaUPT0LH8KmD08gaq6X8dwy93GJSYGOlPp1AsN8bN4WwqEskC217C/Jctt9QGmiSt4Zzf5Z/dtLbqeasrbhDRf+AlYg1WiSoCRgCvR+a7ITaJ7yGiLzq59hd8wrb3Y34FciE6qDjG2gUhJvdcW3CPcZMVd06raR4S+YuRLGbsBBnwZyJCgRviEpTJBBZqxv34kkYSwjJRZ8+2cpZcvlMsMmB6TX3d2v4WDJJjCDDM+F8+SBIAoSSCwfzGF1q6WY1oWIerR2Ojqaj+nXhHTt4TJCJEg0C3OovnhtgTHvtp+56rTwZO7C3M9XS6h+JWyehwCn0oTwt2PjrasRJEsLRXMnLFJFaITa6davMaoaLoMpS3jVYkIbP5dgJlOGv1TntKEwV1iXSomH/hCndGXIe8Xss+fPQrKIpbxrqWxI6bz8U=
  - secure: ce7yy61WyzLqQe6VlkxXhadu8g2Z8awzc8sDqfizly0yeL4ZxqWe9gAySvSiHEY1kfCn12SvSiQKcy0hBOANT6sDIW9K4e8e9hvVaqi5vFsgrDUnASgVGmESxa/qHOdj82/fRdxgnw3pt98yCR5wxmrthLP/azacCVLFUgJ8GAvMiGZtf3KIdT6TZY/G+ogDJe4QAp9D3gSutpiGlb3zNf3uhECdbaRGYIS4iKsf/PRV1378z0GDP1KJESFaKdS/VJAe+RmvQVb8v6rH7f6Wj2dkJ5ZCLxYJ4Mi4//QRyV1CgGQ5uR8E1lfrIXUEantyXl4tmaS2owVpAwDLbZYsCee4FmpbRdoQcfWufNAYQ1IzybEDKEgYL6vaq4AlzislZD0qMqT298QrQ5nQKbpHVvH8cWHkzoYfPHiMymx+sZu66JJC1jHSPt85/T9r02ovctl3STpapHAK7r9043Mel4MefdctpJuPwOes0QNL+uWADHM26EYvSEW8kyG6V83exRDHt3CDL/65jBoyySAfoCb6Pp4Sn3rgcAdC5395O+76zuGR/KBcjLtFOAKYQYax7NFvmdraC8hmRj6tmn/ug4tzuXlbpcVStuHwjaD7EKrgYTg4uDHz71Ea/v6bgI0k23wH6SJsp1PwkDR9QFhV6XSYXstxCJozHX0BTx+5sxA=
